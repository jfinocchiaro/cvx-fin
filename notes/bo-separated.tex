\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{mathtools, amsthm, amsmath, amssymb, graphicx, verbatim}
%\usepackage[thmmarks, thref, amsthm]{ntheorem}
\usepackage{color}
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage[colorinlistoftodos,textsize=tiny]{todonotes} % need xargs for below
%\usepackage{accents}
\usepackage{bbm}
\usepackage{xspace}

\usetikzlibrary{calc}
\newcommand{\Comments}{1}
\newcommand{\mynote}[2]{\ifnum\Comments=1\textcolor{#1}{#2}\fi}
\newcommand{\mytodo}[2]{\ifnum\Comments=1%
  \todo[linecolor=#1!80!black,backgroundcolor=#1,bordercolor=#1!80!black]{#2}\fi}
\newcommand{\raf}[1]{\mynote{green}{[RF: #1]}}
\newcommand{\raft}[1]{\mytodo{green!20!white}{RF: #1}}
\newcommand{\jessie}[1]{\mynote{purple}{[JF: #1]}}
\newcommand{\jessiet}[1]{\mytodo{purple!20!white}{JF: #1}}
\newcommand{\bo}[1]{\mynote{blue}{[Bo: #1]}}
\newcommand{\botodo}[1]{\mytodo{blue!20!white}{[Bo: #1]}}
\ifnum\Comments=1               % fix margins for todonotes
  \setlength{\marginparwidth}{1in}
\fi


\newcommand{\reals}{\mathbb{R}}
\newcommand{\posreals}{\reals_{>0}}%{\reals_{++}}
\newcommand{\dom}{\mathrm{dom}}

\newcommand{\prop}[1]{\Gamma[#1]}
\newcommand{\eliccts}{\mathrm{elic}_\mathrm{cts}}
\newcommand{\eliccvx}{\mathrm{elic}_\mathrm{cvx}}
\newcommand{\elicpoly}{\mathrm{elic}_\mathrm{pcvx}}
\newcommand{\elicembed}{\mathrm{elic}_\mathrm{embed}}

\newcommand{\cell}{\mathrm{cell}}

\newcommand{\abstain}[1]{\mathrm{abstain}_{#1}}
\newcommand{\mode}{\mathrm{mode}}

\newcommand{\simplex}{\Delta_\Y}

% alphabetical order, by convention
\newcommand{\C}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\I}{\mathcal{I}}
\newcommand{\R}{\mathcal{R}}
\newcommand{\X}{\mathcal{X}}
\newcommand{\Y}{\mathcal{Y}}

\newcommand{\inprod}[2]{\langle #1, #2 \rangle}%\mathrm{int}(#1)}
\newcommand{\inter}[1]{\mathring{#1}}%\mathrm{int}(#1)}
%\newcommand{\expectedv}[3]{\overline{#1}(#2,#3)}
\newcommand{\expectedv}[3]{\E_{Y\sim{#3}} {#1}(#2,Y)}
\newcommand{\toto}{\rightrightarrows}
\newcommand{\strip}{\mathrm{strip}}
\newcommand{\trim}{\mathrm{trim}}
\newcommand{\fplc}{finite-piecewise-linear and convex\xspace} %xspace for use in text
\newcommand{\conv}{\mathrm{conv}}
\newcommand{\ones}{\mathbbm{1}}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}

\newcommand{\Ind}{\mathbf{1}}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\arginf}{arg\,inf}
\DeclareMathOperator*{\sgn}{sgn}


\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\begin{document}

Given a set $T$ and a point $u$, let $d(T,u) = \inf_{t \in T} \|t-u\|$.

Given two sets $T,T'$, let $d(T,T') = \inf_{t\in T, t' \in T'} \|t-t'\|$.

\raf{I think we'll want open balls, so $< \epsilon$, just because we'll get better bounds that way (larger $\epsilon$ is better).} \bo{sure, unless it matters whether the sets are closed}
Let the ``thickening'' $B(T,\epsilon)$ be defined as
  \[ B(T,\epsilon) = \{u \in \R' : d(T,u) \leq \epsilon \} . \]

We are given an original loss $\ell$ with property $\gamma$ and finite report space $\R$; and a polyhedral embedding with loss $L$, property, $\Gamma$, report space $\R' \subseteq \reals^d$, and embedding points $\{u_r : r \in \R\}$.


Let $\mathcal{S} \subseteq 2^{\R}$ be defined as $\mathcal{S} = \{\gamma(p) : p \in \Delta_{\Y}\}$.
In other words, for each $p$, we take the set of optimal reports $R = \gamma(p) \subseteq \R$, and we add $R$ to $\mathcal{S}$.

Let $\mathcal{U} \subseteq 2^{\reals^d}$ be defined as $\mathcal{U} = \{\Gamma(p) : p \in \Delta_{\Y}\}$.

\begin{lemma} \label{lemma:U-convex-closed}
  $\mathcal{U}$ is a finite set, and each element $U$ is a closed, convex polytope.
\end{lemma}
\begin{proof}
  \bo{TODO}
\end{proof}

\begin{lemma} \label{lemma:U-surject}
  There is a surjection from $\mathcal{U}$ to $\mathcal{S}$ where $U \mapsto R$ if, for some $p$, we have $\gamma(p) = U$ and $\Gamma(p) = R$.
  We write $R_U$ for the value of this map at $U$.
\end{lemma}
\begin{proof}
%  \bo{TODO!}
%  \raf{I'm not actually sure we have a bijection.  Actually, I know we don't: take hinge loss, where $\Gamma((0.9,0.1)) = \{1\}$ but $\Gamma((1,0)) = [1,\infty)$; both have $R = \{1\}$.  What we \emph{can} say is, $\mathcal{U}$ is finite, and there is a surjective map $h:\mathcal{U}\to\mathcal{S}$ where in fact $h(U) = \{r\in\R : u_r \in U\} \neq \emptyset$.  (And $u_r \in \Gamma(p) \iff r \in \gamma(p)$ of course, from embedding.)  Hopefully this is enough...}
  \bo{fixed, thanks!}
\end{proof}

\begin{lemma} \label{lemma:calibrated-pos}
  If a subset of $\mathcal{U}$ intersect, then their corresponding report sets intersect as well.
\end{lemma}
\begin{proof}
  \bo{TODO, or, this is our proof that a calibrated link is possible!}
\end{proof}

%% Bo: I thought this might be useful, but guess not.
%\begin{lemma}
%  Let $\{U_j : j \in \mathcal{J}\}$ be a finite collection of closed, convex sets.
%  If $u \not\in \cap_j U_j$, then for all small enough $\epsilon > 0$, $u \not\in \cap_j B(U_j,\epsilon)$.
%\end{lemma}
%\begin{proof}
%  Consider the collection $\{U_j : j \in \mathcal{J}\}$ and suppose $u \not \in \cap_j U_j$.
%  In particular, there exists some $U$ in the collection such that $u \not\in U$.
%  Because $U$ is closed and convex, that there exists $\epsilon' > 0$ such that $d(U,u) \geq \epsilon'$.
%  So for all $\epsilon < \epsilon'$, we have $u \not\in B(U,\epsilon)$.
%  This implies $u \not\in \cap_j B(U_j,\epsilon)$.
%\end{proof}
%

\begin{lemma} \label{lemma:enclose-halfspaces}
  Let $D$ be a closed, convex polytope in $\reals^d$.
  For any norm $\|\cdot\|$ and any $\epsilon > 0$, letting $B(D,\epsilon) = \{u : \min_{x \in D} \|u-x\| \leq \epsilon\}$, \bo{or open ball} there exists a convex set $D'$, the intersection of a finite number of open halfspaces, such that
    \[ D \subsetneq D' \subsetneq B(D,\epsilon) . \]
\end{lemma}
\begin{proof}
  Let $S$ be the $\epsilon$-ball in norm $\|\cdot\|$.
  Note that $B(D,\epsilon) = D + S$ where $+$ is the Minkowski sum.
  Now let $S'$ be a ball in $\|\cdot\|_1$ of nonzero radius small enough that $S' \subsetneq S$.
  (Such a ball always exists by equivalence of norms.\bo{cite})
  Because both $D$ and $S'$ are polytopes, their Minkowski sum $D' = D + S'$ is a polytope.\bo{Cite}
  Now, if $T' \subsetneq T$, then for any set $D$, the Minkowksi sum satisfies $D + T' \subsetneq D + T$, so in particular because $\emptyset \subsetneq S' \subsetneq S$, we have
    \[ D \subsetneq D' \subsetneq B(D,\epsilon) . \]
  Now we observe that because $D'$ is a polytope, we can write it as the intersection of a finite number of halfspaces, which we can make open sets.\bo{Ought to improve/reword this.}
\end{proof}

\begin{lemma} \label{lemma:thick-nonempty}
  Let $\{U_j : j \in \mathcal{J}\}$ be a finite collection of closed, convex sets with nonempty joint intersection.
  Then for all $\delta > 0$, there exists  $\epsilon > 0$ such that $\cap_j B(U_j,\epsilon) = \subseteq B(\cap_j U_j, \delta)$.
\end{lemma}
\begin{proof}
  By induction on the size of the collection.
  If the size is $1$, set $\epsilon = \delta$.
  If the size is larger than $1$, let $U_j$ be any member of the collection, let $U' = \cap_{j'\neq j} U_{j'}$, and let $C(\epsilon) = \cap_{j' \neq j} B(U_{j'},\epsilon)$.
  Let $D = U_j \cap U'$.
  We must show that $B(U_j,\epsilon) \cap C(\epsilon) \subseteq B(D,\delta)$.
  By Lemma \ref{lemma:enclose-halfspaces}, we can enclose $D$ strictly within a polytope $D'$, the intersection of a finite number of open halfspaces, which is itself strictly enclosed in $B(D,\delta)$.
  For example, if $D$ is a point, then enclose it in a hypercube, which is enclosed in the ball $B(D,\delta)$.
%  \raf{We can use the fact that the $U_j$ are all polyhedral here, so $D$ is polyhedral as well.  Now let $B_1()$ be a ball with respect to $\|\cdot\|_1$, and observe that $B_1(D,\delta')$ is therefore also polyhedral for all $\delta'$.  Using norm bounds, we can find a small enough $\delta'$ so that $B_1(D,\delta') \subseteq B(D,\delta)$.}
  We will prove that, for small enough $\epsilon$, $B(U_j,\epsilon) \cap C(\epsilon)$ is contained in $D'$.
  This implies that it is contained in $B(D,\delta)$.

  For each halfspace defining $D'$, consider its complement $F$, a closed halfspace.
  We prove that $F \cap B(U_j,\epsilon) \cap C(\epsilon) = \emptyset$.
  Consider the intersections of $F$ with $U$ and $U'$, call them $G$ and $G'$.
  These are closed, convex sets that do not intersect (because $D$ in contained in the complement of $F$).
  So $G$ and $G'$ are separated by a nonzero distance, so $B(G,\gamma) \cap B(G',\gamma) = \emptyset$ for small enough $\gamma$.
  And $B(G,\gamma) = F \cap B(U_j,\gamma)$ while $B(G',\gamma) = F \cap B(U',\gamma)$.
  By inductive assumption, $C(\epsilon) \subseteq B(U',\gamma)$ for small enough $\epsilon$.
  So $F \cap B(U_j,\epsilon) \cap C(\epsilon) = \left(F \cap B(U_j,\epsilon)\right) \cap \left(F \cap C(\epsilon)\right) = \emptyset$ for a small enough $\epsilon$.

  We now take the minimum over these finitely many $\epsilon$'s (one per halfspace).
\end{proof}

\begin{figure}
\caption{Illustration of a special case of the proof of Lemma \ref{lemma:thick-nonempty} where there are two sets $U_1,U_2$ and their intersection $D$ is a point. We build the polytope $D'$ inside $B(D,\delta)$. By considering each halfspace that defines $D'$, we then show that for small enough $\epsilon$, $B(U_1,\epsilon)$ and $B(U_2,\epsilon)$ do not intersect outside $D'$. So the intersection is contained in $D'$, so it is contained in $B(D,\delta)$.}
\includegraphics[width=0.24\textwidth]{figs/separated-proof-2} \hfill
\includegraphics[width=0.24\textwidth]{figs/separated-proof-3} \hfill
\includegraphics[width=0.24\textwidth]{figs/separated-proof-4} \hfill
\includegraphics[width=0.24\textwidth]{figs/separated-proof-5}
\end{figure}

\begin{lemma} \label{lemma:thick-empty}
  Let $\{U_j : j \in \mathcal{J}\}$ be a finite collection of nonempty closed, convex sets with empty joint intersection.
  Then for all $\delta > 0$, there exists  $\epsilon > 0$ such that $\cap_j B(U_j,\epsilon) = \emptyset$.
\end{lemma}
\begin{proof}
  By induction on the size of the family.
  Note that the family must have size at least two.
  Let $U_j$ be any set in the family and let $U' = \cap_{j' \neq j} U_{j'}$.
  There are two cases.
  If $U'$ is empty, then it must be the intersection of at least two sets, so we must have at least three sets in the family.
  Therefore, by inductive assumption, for small enough $\delta$ we have $\cap_{j' \neq j} B(U_{j'},\delta) = \emptyset$, which proves this case.

  Now suppose $U'$ is nonempty, including the base case where the size of the family is two.
  Because $U_j$ and $U'$ are non-intersecting closed convex sets, they are separated by some distance $\epsilon$.
  By Lemma \ref{lemma:thick-nonempty}, for any $\epsilon > 0$, there exists $\delta > 0$ such that $\cap_{j'\neq j} B(U_{j'},\delta) \subseteq B(U', \epsilon/3)$.
  We have $B(U_j, \epsilon/3) \cap B(U', \epsilon/3) = \emptyset$.
\end{proof}

%\begin{lemma} \label{lemma:thick-int}
%  Let $\{U_j : j \in \mathcal{J}\}$ be a finite collection of closed, convex sets.
%  For any $\delta > 0$, there exists an $\epsilon > 0$ such that
%  \[ \cap_j B(U_j,\epsilon) \subseteq B\left(\cap_j U_j, \delta\right)  \]
%  where if $\cap_j U_j = \emptyset$, we interpret the right-hand side as $\emptyset$.
%\end{lemma}
%\begin{proof}
%  \raf{Maybe cleaner to break into to two parts right off the bat: $\cap U_j$ is empty or not?}
%  By induction on the size of the collection.
%  If the size is $1$, set $\epsilon = \delta$.
%  If the size is larger than $1$, let $U_j$ be any member of the collection, let $U' = \cap_{j'\neq j} U_{j'}$, and let $C(\epsilon) = \cap_{j' \neq j} B(U_{j'},\epsilon)$.
%  There are two cases.
%  If $U_j \cap U' = \emptyset$, then we must show that $B(U_j,\epsilon) \cap C(\epsilon) = \emptyset$.
%  Because $U_j,U'$ are both closed and convex, they are separated by some nonzero distance. So for some $\gamma > 0$, we have $B(U_j,\gamma) \cap B(U',\gamma) = \emptyset$.
%  By inductive assumption, for all small enough $\epsilon$, $C(\epsilon) \subseteq B(U',\gamma)$, so we have $B(U_j,\gamma) \cap C(\epsilon) = \emptyset$.
%  Choosing a small enough $\epsilon$ that is also less than $\gamma$ completes this case.
%
%  The other case is that $U_j \cap U' = D$, some nonempty closed convex set.
%  Here we must show that $B(U_j,\epsilon) \cap C(\epsilon) \subseteq B(D, \delta)$.
%  Enclose $D$ in the intersection of a finite number of open halfspaces, which is enclosed in $B(D,\delta)$. \bo{I am claiming this is possible, but I didn't prove it yet...}
%  We will prove that, for small enough $\epsilon$, $B(U_j,\epsilon) \cap C(\epsilon)$ is contained in this same intersection.
%  This implies that it is contained in $B(D,\delta)$.
%
%  For each halfspace, consider its complement $F$, a closed halfspace.
%  We prove that $F \cap B(U_j,\epsilon) \cap C(\epsilon) = \emptyset$.
%  Consider the intersections of $F$ with $U$ and $U'$, call them $G$ and $G'$.
%  These are closed, convex sets that do not intersect (because $D$ in contained in the complement of $F$).
%  So $G$ and $G'$ are separated by a nonzero distance, so $B(G,\gamma) \cap B(G',\gamma) = \emptyset$ for small enough $\gamma$.
%  And $B(G,\gamma) = F \cap B(U_j,\gamma)$ while $B(G',\gamma) = F \cap B(U',\gamma)$.
%  By inductive assumption, $C(\epsilon) \subseteq B(U',\gamma)$ for small enough $\epsilon$.
%  So $F \cap B(U_j,\epsilon) \cap C(\epsilon) = \left(F \cap B(U_j,\epsilon)\right) \cap \left(F \cap C(\epsilon)\right) = \emptyset$ for a small enough $\epsilon$.
%
%  We now take the minimum over these finitely many $\epsilon$'s (one per halfspace).
%\end{proof}
  

\begin{corollary} \label{cor:thick-intersect}
  There exists a small enough $\epsilon > 0$ such that, for any subset $\{U_j : j \in \mathcal{J}\}$ of $\mathcal{U}$, if $\cap_j U_j = \emptyset$, then $\cap_j B(U_j,\epsilon) = \emptyset$.
\end{corollary}
\begin{proof}
  For each subset, Lemma \ref{lemma:thick-empty} gives an $\epsilon$.
  We take the minimum over these finitely many choices.
\end{proof}

\begin{lemma} \label{lemma:distance-loss}
  If $L$ is a polyhedral loss, then for each $p$, there exists a constant $c$ such that:
  if the set $U$ is optimal with expected loss $z$, and $d(U,u) \geq \delta$, then $L(u;p) > z + c\delta$.
\end{lemma}
\begin{proof}
  \bo{Changed the statement to something hopefully correct}
%  \bo{TODO}
%  \raf{My first thought was ``This is a great lemma!'' but I don't think it's quite true.  Again think of hinge, and take $p\to 0.5$ from above; $U = \{1\}$ the whole time, but $L(-1,p) \to L(1,p)$, so no constant $c$ will work.  We will want a lemma like this, but I think we'll want to relate $\ell$ differences to $L$ differences, especially since that's the new definition of separated link anyway.  (Note that this more nuanced version holds for this hinge example: yes $L(-1,p)$ is getting closer to $L(1,p)$, but so is $\ell(-1,p)$ to $\ell(1,p)$.}
\end{proof}

\begin{theorem}
  Let $L(u,y)$ be a surrogate loss for $\ell(r,y)$ for which there exists some calibrated link.
  Suppose $L$ is a polyhedral loss.
  Then there exists a calibrated, \emph{separated} link $\psi$ between these losses, meaning, for all $p$,
    \[ \inf_{u \in \R' : \psi(u) \not\in \gamma(p)} L(u;p) > \inf_{u \in \R'} L(u;p) . \]
\end{theorem}
\begin{proof}
  We construct $\psi$.
  
  Fix a small enough $\epsilon$ as promised by Corollary \ref{cor:thick-intersect}.
  
  We will label each point $u \in \R'$ with a set of legal mappings $r \in \R$.
  Let $\Psi: \R' \toto \R$ be this labeling.
  Begin by initializing $\Psi(u) = \R$ for all $u$, i.e. all mappings are legal.
  Then, we apply the following iterative procedure.
  For each set $U \in \mathcal{U}$, for each $u \in B(U,\epsilon)$, we set $\Psi(u) = \Psi(u) \cap R_U$ where $R_U$ is given by Lemma \ref{lemma:U-surject}.
  Then, construct $\psi$ by making arbitrary legal choices, e.g. $\psi(u)$ is defined as the first element of $\R$ in $\Psi(u)$.
  
  We have to prove, first, that $\Psi(u)$ is nonempty for each $u$, and second, that $\psi$ is a separated, calibrated link.
  
  Consider any $u \in \R'$.
  If $u$ is not in $B(U,\epsilon)$ for any $U \in \mathcal{U}$, then we have $\Psi(u) = \R$, so it is nonempty.
  Otherwise, let $\{U_j : j \in \mathcal{J}\}$ be the family whose thickenings intersect at $u$.
  By Corollary \ref{cor:thick-intersect}, because of our choice of $\epsilon$, the family themselves has nonempty intersection.
  By Lemma \ref{lemma:calibrated-pos}, their corresponding report sets $\{R_j : j \in \mathcal{J}\}$ also intersect at some $r$, so $\Psi(u)$ is nonempty.
  
  Finally, we must show that $\psi$ is a separated, calibrated link.
  It is calibrated because each $U$ maps under $\psi$ into the corresponding $R$ (since its entire thickening does).
  For separation, fix $p$. Now, suppose $U$ is optimal and $u$ is not.
  Now, if $u$ does not map to an optimal report, then it is not in $B(U,\epsilon)$.
  So by Lemma \ref{lemma:distance-loss}, its expected loss is at least $c\epsilon$ larger than optimal for some $c$ depending only on $L$ and $p$.
  This holds for all such $u$, so the link is separated.
\end{proof}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%\break
%
%OLD, OUTDATED - Bo, May 5 2019
%
%\begin{lemma} \label{lemma:U-separated}
%  Let $\{U_j : j \in \mathcal{J}\} \subseteq \mathcal{U}$ be a subset of $\mathcal{U}$ with nonempty intersection, and let $U$ be some other member of $\mathcal{U}$.
%  Then one and only one of the following is true:
%  \begin{enumerate}
%    \item The intersection of the family and $U$ is nonempty, i.e. they all overlap at some point.
%    \item There exists $\epsilon > 0$ such that $d(U, \cap_{j \in \mathcal{J}} U_j) \geq \epsilon$.
%  \end{enumerate}
%\end{lemma}
%\begin{proof}
%  Supposing (1) is false, we prove (2).
%  Each member of $\mathcal{U}$ is a closed convex set; so the intersection of any finite collection is also closed and convex.
%  In particular, $U$ and $\cap_{j \in \mathcal{J}} U_j$ are both closed and convex, so if they do not intersect, then \bo{CITE} they are separated by some nonzero distance.
%\end{proof}
%
%\begin{corollary} \label{cor:separated-small-enough}
%  There is an $\epsilon > 0$ such that, for all families $\{U_j : j \in \mathcal{J}\}$ that do not intersect at a point, each member is separated from the intersection of the rest by more than $2\epsilon$.
%\end{corollary}
%\begin{proof}
%  Take the minimum $\epsilon$ promised by Lemma \ref{lemma:U-separated}, over all of the finitely many subsets of $\mathcal{U}$, and divide by $3$.
%\end{proof}
%
%\begin{lemma} \label{lemma:U-intersect-reports}
%  If a subset of $\mathcal{U}$ intersect at some point, then their corresponding $R$ sets all intersect.
%\end{lemma}
%\begin{proof}
%  \bo{TODO, or, this is what we had to prove to show a calibrated link exists.}
%\end{proof}
%
%
%Prove: intersection of thickenings is thickening of intersections.
%
%Not true! Can take a really long triangle...
%
%
%UPDATE (May 5): need to prove that as we take epsilon small, each U is eps-far from the intersection of all the other $B(U',\epsilon)$ sets.
%
%
%\begin{lemma}
%  Let $\epsilon$ be given by Corollary \ref{cor:separated-small-enough}.
%  Then a subset of $\mathcal{U}$ intersect at some point if and only if their $\epsilon$-thickenings intersect at some point.
%\end{lemma}
%\begin{proof}
%  If the mutual intersection of the subset contains some point $u$, then their thickenings all intersect at $u$ as well.
%
%  Now suppose the mutual intersection of the subset is empty; we prove the mutual intersection of the thickenings is also empty.
%  By induction on the size of the subset.
%  For the smallest possible case of two sets $U,U'$ with empty mutual intersection, by Corollary \ref{cor:separated-small-enough}, we have $d(U,U') > 2\epsilon$, so their thickenings do not intersect.
%
%  For the inductive step:
%  Let $U$ be a member of the subset, and $\{U_j : j \in \mathcal{J}\}$ be the remaining members.
%  Let $C = \cap_{j \in \mathcal{J}} B(U_j,\epsilon)$.
%  If $C$ is empty, then its intersection with $B(U,\epsilon)$ is also empty and we are done.
%  If $C$ is nonempty, then by induction 
%  Then by Corollary \ref{cor:separated-small-enough}, for any $U$ in the subset, $U$ is separated from the intersection of the rest by more than $2\epsilon$.
%  So the thickening $B(U,\epsilon)$ cannot intersect with the intersection of the thickenings of the others (note the intersetion of the thickenings is the same as the thickening of the intersections, defined as containing all points within $\epsilon$ of the all sets.).
%  So the mutual intersection of all thickenings is also empty.
%\end{proof}
%
%\begin{corollary} \label{cor:thick-intersect-reports}
%  If the thickenings of a subset of $\mathcal{U}$ intersect at some point, then their corresponding $R$ sets all intersect.
%\end{corollary}
%
%\begin{theorem}
%  Let $L(u,y)$ be a surrogate loss for $\ell(r,y)$ for which there exists some calibrated link.
%  Suppose $L$ is a polyhedral loss.
%  Then there exists a calibrated, \emph{separated} link $\psi$ between these losses, meaning, for all $p$,
%    \[ \inf_{u \in \R' : \psi(u) \not\in \gamma(p)} L(u;p) > \inf_{u \in \R'} L(u;p) . \]
%\end{theorem}
%\begin{proof}
%We construct $\psi$.
%
%Fix a small enough $\epsilon$ as promised by Lemma \ref{lemma:U-separated}.
%
%We will label each point $u \in \R'$ with a set of legal mappings $r \in \R$.
%Let $\Psi: \R' \toto \R$ be this labeling.
%Begin by initializing $\Psi(u) = \R$ for all $u$, i.e. all mappings are legal.
%
%Now, we apply the following iterative procedure.
%For each $R \in \mathcal{S}$, consider the corresponding set $U \in \mathcal{U}$ (given by the bijection of Lemma \ref{lemma:U-separated}).
%For every $u \in B\left(U, \epsilon\right)$, we set $\Psi(u) = \Psi(u) \cap R$.
%
%%(Geometrically: in the case where $R=\{r\}$, we simply assign the epsilon-ball around $u_r$ to point to only $r$. In the case with multiple reports in $R$, we take the polyhedron with corners $U_R$ and ``thicken it'', then require that this thick shape map only to elements of $R$.)
%
%Now, we construct $\psi$ by making arbitrary legal choices, e.g. $\psi(u)$ is defined as the first element of $\R$ in $\Psi(u)$.
%
%We have to prove, first, that $\Psi(u)$ is nonempty for each $u$, and second, that $\psi$ is a separated, calibrated link.
%
%First: consider any $u \in \R'$.
%If $u$ is not in $B(U,\epsilon)$ for any $U \in \mathcal{U}$, then we have $\Psi(u) = \R$, so it is nonempty.
%Otherwise, let $\{U_j : j \in \mathcal{J}\}$ be the family whose thickenings intersect at $u$.
%By Corollary \ref{cor:thick-intersect-reports}, their corresponding report sets $\{R_j : j \in \mathcal{J}\}$ also intersect at some $r$, so $\Psi(u)$ is nonempty.
%
%Finally, we must show that $\psi$ is a separated, calibrated link.
%\end{proof}
%
%
%
%
%
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%\break
%
%{\large OLD STUFF -- MOVED HERE BY BO 2019-05-04 09:34 ET}
%
%Given a set $R \subseteq \R$, let $U_R = \{u_r : r \in \R\}$.
%
%\begin{lemma} \label{lemma:conv-R-no-contain}
%  Let $R \in \mathcal{S}$ and $r \not\in R$.
%  Then $u_r \not\in \conv(U_R)$.
%  Furthermore, we have $d(\conv(U_R), u_r) \geq \epsilon$ for some $\epsilon > 0$.
%\end{lemma}
%\begin{proof}
%  If $R \in \mathcal{S}$, then there exists $p$ for which all of $R$ is simultaneously optimal.
%  By definition of embedding, this means all of the points $U_R$ are optimal for the surrogate loss.
%  Since it is a convex loss, this implies that every point in $\conv(U_R)$ is optimal as well.
%  By definition of embedding, if $r$ is not optimal, then $u_r$ is not optimal, hence is not in $\conv(U_R)$.
%
%  Because $U_R$ is a finite set, $\conv(U_R)$ is a closed convex set, so $u_r \not\in U_R$ implies that it is separated by a distance of some $\epsilon > 0$.
%\end{proof}
%
%\begin{lemma} \label{lemma:conv-R-min-eps}
%  There is some $\epsilon > 0$ such that, for all $R \in \mathcal{S}$ and all $r \not\in R$, we have $d(\conv(U_R), u_r) > 2\epsilon$.
%\end{lemma}
%\begin{proof}
%  Follows from Lemma \ref{lemma:conv-R-no-contain} because $\R$ is a finite set. For example, apply the lemma for all possible $R,r$, take the minimum resulting $\epsilon$, and divide by three.
%\end{proof}
%
%%\begin{lemma} \label{lemma:U-close-intersect}
%%  Let $\epsilon$ be given by Lemma \ref{lemma:conv-R-min-eps}.
%%  Suppose some $u$ satisfies $d(\conv(U_R),u) \leq \epsilon$ and $d(\conv(U_{R'}),u) \leq \epsilon$ for $R,R' \in \mathcal{S}$.
%%  Then $R \cap R' \neq \emptyset$, i.e. they have some report in common.
%%\end{lemma}
%%\begin{proof}
%%  We prove the contrapositive.
%%  Suppose $R \cap R' = \emptyset$.
%%  Suppose $d(\conv(U_r),u) \leq \epsilon$.
%%  By Lemma \ref{lemma:conv-R-min-eps}, we have that for ...
%%
%%  \bo{Hmm -- need to rule out cases where they pass through each other, like the center of the squares in abstain loss R3.}
%%\end{proof}
%
%\begin{theorem}
%  Let $L(u,y)$ be a surrogate loss for $\ell(r,y)$ for which there exists some calibrated link.
%  Suppose $L$ is a polyhedral loss.
%  Then there exists a calibrated, \emph{separated} link $\psi$ between these losses, meaning, for all $p$,
%    \[ \inf_{u \in \R' : \psi(u) \not\in \gamma(p)} L(u;p) > \inf_{u \in \R'} L(u;p) . \]
%\end{theorem}
%
%\begin{proof}
%Suppose $L$ is a polyhedral loss embedding $\ell$.
%For each $r \in \R$, let $u_r \in \R'$ be the corresponding embedding point.
%We construct $\psi$.
%
%Fix a small enough $\epsilon$ as promised by Lemma \ref{lemma:conv-R-min-eps}.
%
%We will label each point $u \in \R'$ with a set of legal mappings $r \in \R$.
%Let $\Psi: \R' \toto \R$ be this labeling.
%Begin by initializing $\Psi(u) = \R$ for all $u$, i.e. all mappings are legal.
%
%Now, we apply the following iterative procedure.
%For each $R \in \mathcal{S}$, consider the corresponding set $U_R = \{u_r : r \in R\}$.
%For every $u \in B\left(\conv(U_R), \epsilon\right)$, we set $\Psi(u) = \Psi(u) \cap R$.
%
%(Geometrically: in the case where $R=\{r\}$, we simply assign the epsilon-ball around $u_r$ to point to only $r$. In the case with multiple reports in $R$, we take the polyhedron with corners $U_R$ and ``thicken it'', then require that this thick shape map only to elements of $R$.)
%
%Now, we construct $\psi$ by making arbitrary legal choices, e.g. $\psi(u)$ is defined as the first element of $\R$ in $\Psi(u)$.
%
%We have to prove, first, that $\Psi(u)$ is nonempty for each $u$, and second, that $\psi$ is a separated, calibrated link.
%
%First: consider any $u \in \R'$.
%If $u$ is not in $B(\conv(U_R),\epsilon)$ for any $R \in \mathcal{S}$, then we have $\Psi(u) = \R$, so it is nonempty.
%Otherwise, it is the intersection of at least one set:
%  \[ \Psi(u) = \cap \left\{ R : d(\conv(U_R),u) \leq \epsilon \right\} . \]
%
%
%
%Finally, we must show that $\psi$ is a separated, calibrated link.
%\bo{...}
%\end{proof}

\end{document}
