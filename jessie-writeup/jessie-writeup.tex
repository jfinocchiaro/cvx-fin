\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{mathtools, amsmath, amsthm, amssymb, graphicx, mathrsfs, verbatim}
%\usepackage[thmmarks, thref, amsthm]{ntheorem}
\usepackage{color}
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage[colorinlistoftodos,textsize=tiny]{todonotes} % need xargs for below
%\usepackage{accents}
\usepackage{bbm}
\usepackage{xspace}
\usepackage[margin=1.25in]{geometry}

\usepackage[colorlinks=true,breaklinks=true,bookmarks=true,urlcolor=blue,
     citecolor=blue,linkcolor=blue,bookmarksopen=false,draft=false]{hyperref}

\newcommand{\Comments}{1}
\newcommand{\mynote}[2]{\ifnum\Comments=1\textcolor{#1}{#2}\fi}
\newcommand{\mytodo}[2]{\ifnum\Comments=1%
  \todo[linecolor=#1!80!black,backgroundcolor=#1,bordercolor=#1!80!black]{#2}\fi}
\newcommand{\raf}[1]{\mynote{green}{[RF: #1]}}
\newcommand{\raft}[1]{\mytodo{green!20!white}{RF: #1}}
\newcommand{\jessie}[1]{\mynote{purple}{[JF: #1]}}
\newcommand{\jessiet}[1]{\mytodo{purple!20!white}{JF: #1}}
\ifnum\Comments=1               % fix margins for todonotes
  \setlength{\marginparwidth}{1in}
\fi


\newcommand{\reals}{\mathbb{R}}
\newcommand{\posreals}{\reals_{>0}}%{\reals_{++}}

% alphabetical order, by convention
\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\I}{\mathcal{I}}
\renewcommand{\P}{\mathcal{P}}
\newcommand{\R}{\mathcal{R}}
\newcommand{\X}{\mathcal{X}}
\newcommand{\Y}{\mathcal{Y}}


\newcommand{\inter}[1]{\mathring{#1}}%\mathrm{int}(#1)}
\newcommand{\cl}[1]{\text{cl}}
%\newcommand{\expectedv}[3]{\overline{#1}(#2,#3)}
\newcommand{\expectedv}[3]{\E_{Y\sim{#3}} {#1}(#2,Y)}
\newcommand{\toto}{\rightrightarrows}
\newcommand{\trim}{\mathrm{trim}}
\newcommand{\fplc}{finite-piecewise-linear and convex\xspace} %xspace for use in text
\newcommand{\conv}{\mathrm{conv}}
\newcommand{\ones}{\mathbbm{1}}
\newcommand{\aff}{\text{aff}}
\newcommand{\im}{\text{im}}
\newcommand{\strip}{\mathrm{strip}}


\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\arginf}{arg\,inf}
\DeclareMathOperator*{\sgn}{sgn}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}
\newtheorem{definition}{Definition}
\newtheorem{corollary}{Corollary}
\newtheorem{conjecture}{Conjecture}
\newtheorem{notation}{Notation}




\begin{document}

\section{Notation and Definitions}


Let $\Y$ be a finite outcome space, with $n:=|\Y|$, and $\Delta(\Y)$ be the set of probability distributions over $\Y$.

We define the \emph{level set} of a property at report value $r\in\R$ to be the set $\Gamma_r := \{p\in\P : r \in \Gamma(p)\}$.
Additionally, we can consider an unlabeled level set $\theta$ as this same set of distributions, but not associated with the report $r$.

The set $\Theta \subseteq 2^{\Delta(\Y)}$ is an unlabeled property, and finite if $|\Theta| < \infty$.
Observe that $\Theta$ is a set of level sets that divide the simplex, and not a function.


\begin{definition}
Let $\Gamma$ be a labeled property.
Define $\text{strip}(\Gamma) := \{ \Gamma_r : r \in \R \}$.
Informally, strip removes labels from the property.
\jessie{Note: Strip includes the boundaries of level sets / lower dimensional level sets.}
\end{definition}

\begin{notation}
We will use the following notation: $\Gamma' = \Gamma \cap \R'$ is the property $\Gamma' : p \mapsto \Gamma(p) \cap \R'$.  
\end{notation}

\begin{notation}
  Consider two labeled properties $\Gamma' : \P \toto \R$ and $\Gamma : \P \toto \R$.
  We say $\Gamma' \leq \Gamma$ if removing reports from $\Gamma$ yields $\Gamma'$.
  (i.e. $\Gamma' = \R' \cap \Gamma$ for some $\R' \subseteq \R$)
\end{notation}

\begin{definition}
A property $\Gamma: \P \to \R$ is \emph{finite} if $\im(\Gamma) := \{r\in\Gamma(p) : p\in\P, r \in \R \} = \bigcup_{p\in\P} \Gamma(p)$ is a finite set.
\end{definition}

\begin{definition}\label{def:unlabeled-nonredundant}
  An elicitable, unlabeled property $\Theta$ is \emph{nonredundant} if for any full dimensional $\theta_1, \theta_2 \in \Theta$ we observe $\theta_1 \cap \theta_2 = \emptyset$ almost everywhere.
  \jessie{Should be equivalent to definition of nonredundancy for labeled property $\Gamma$, shown in Lemma~\ref{lem:nonredundant-defs-equivalent}.}
\end{definition}



Other notes before starting:
\begin{itemize}
\item (Assuming the metric space is $(\Delta(\Y), \rho)$, where $\rho$ is Euclidean distance, although I don't think the choice of metric matters?).
We just use this looking at interiors of level sets.
\item Using generalized Lebesgue measure on $\P \subset \reals^{|\Delta(\Y)|-1}$
\item The interior of a level set $X_r$ is defined as $\inter{X_r} = \{p \in X_r: \epsilon > 0,  \forall q \in B(\epsilon,p), r \in \argmin_r \E_q L(r,Y)\}$
\item Define the boundary of the closed set $X$ by $bd(X) := X \setminus \inter{X}$.
\item A level set $\theta$ is \emph{full-dimensional} if $dim(\aff(\theta)) = dim(P)$. 
Equivalently, $\theta$ is full-dimensional if there are distributions $p_1, p_2, \ldots, p_n \in \theta$ so that $p_1, \ldots, p_n$ are affinely independent.
\item A full-dimensional level set has non-empty interior.
\end{itemize}

\section{Conjectures and Lemmas on the way}

\begin{conjecture}\label{conj:gam-prime-exists}
	Let $\Gamma$ be a nondegenerate elicitable property with a finite set of \jessie{full-dimensional} level sets \jessie{$\Theta$ so that $\bigcup_{\theta \in \Theta}\theta = \P$}.
	There exists a nondegenerate, nonredundant property $\Gamma'$ such that $\Gamma' \leq \Gamma$. 
\end{conjecture}
\begin{proof}
\emph{Assumptions used: Finite level sets, elicitability implies convex BR, i.e. differentiable a.e.}

	To start, construct $\R' \subseteq \R := \{ r \in \R : \inter{\Gamma_r} \neq \emptyset \}$.
	Clearly, $\R'$ is finite (and nonempty since finitely many level sets implies at least one must have nonempty interior).
	Defining the property $\Gamma' = \Gamma\cap \R'$, we see that $\Gamma' \leq \Gamma$.
	We want to show that the constructed $\Gamma'$ is nondegenerate and nonredundant.
	As $\Gamma$ is nondegenerate, there is some report $r \in \R$ such that $r \in \Gamma(p)$.
	If $p \in \inter{\Gamma}_r$, then by construction of $\R'$, we see $r \in \R'$.
	Since level sets are closed, for distributions on the boundary of a level set, the optimal report $r \in \R'$ is still an optimal report, thus there is at least one report $r \in \R'$ such that $r \in \Gamma(p)$ for all $p \in \P$, so $\Gamma'$ is nondegenerate. 
	
%	\jessie{Skip this paragraph if you believe the last sentence by simply citing closure.}
%	Thus, we just need to show $\Gamma'(p) \neq \emptyset$ for $p \not \in \inter{\Gamma_r}$.
%	As $\Gamma$ is nondegenerate, there are then $m$ level sets $\{\Gamma_{r_i}\}_{i=1}^m$ in the $\epsilon$-ball around $p$.
%	We claim some $r_i$ is in $\R'$.
%	Since there are only a finite set of level sets, at least one in the $\epsilon$-ball centered on $p$ is full dimensional.
%	Therefore, there is some $r_i \in \R'$ so that $p \in cl(\Gamma_{r_i})$, and as level sets are closed by Lemma~\ref{lem:closed-level-sets}, we then observe $p \in \Gamma_{r_i}$.
%	Therefore $\Gamma'$ is nondegenerate.
%	\jessie{End the paragraph you can skip}
	
	Now to show $\Gamma'$ is nonredundant.
	For contradiction, suppose $\Gamma'$ is redundant.
	Then there are $r_1, r_2 \in \R'$ with $r_1 \neq r_2$ with full dimensional level sets $\Gamma_{r_1}$ and $\Gamma_{r_2}$ so that either $\Gamma'_{r_1} \subsetneq \Gamma'_{r_2}$ or $\Gamma'_{r_1} = \Gamma'_{r_2}$.
	
	First, suppose $\Gamma'_{r_1} = \Gamma'_{r_2}$.
	We can think as the property values as labelings of the subgradient sets (denoted by $\partial$) of the the concave Bayes Risk $G(p)$.
	\jessie{Need source: Gneiting Raftery 2007\footnote{\url{https://www.stat.washington.edu/raftery/Research/PDF/Gneiting2007jasa.pdf}} or Raf/Ian 2014\footnote{\url{http://www.cs.colorado.edu/~raf/media/papers/wine-affine.pdf}}}
	As $G$ is concave, it is differentiable almost everywhere, which means that $|\partial G(p)| = 1$ almost everywhere.
	Then $\Gamma'(p) = \partial G(p) \implies |\Gamma'(p)| = 1$ almost everywhere, which-- along with the fact that the level sets $\Gamma'_{r_1}$ and $\Gamma'_{r_2}$ are full dimensional (and therefore have positive measure since they are convex-- see Lemma~\ref{lem:pos-measure-iff-nonempty-int}), contradicts the claim $r_1 \neq r_2$.
	Thus we conclude there aren't reports $r_1, r_2 \in \R'$ so that $r_1 \neq r_2$ and $\Gamma'_{r_1} = \Gamma'_{r_2}$.
	
%	By construction of $\R'$, we know both $\Gamma'_{r_1}$ and  $\Gamma'_{r_2}$ are full dimensional.
%	If $\Gamma'_{r_1} = \Gamma'_{r_2} = \Gamma'_{r_1} \cap \Gamma'_{r_2}$ are full dimensional, this contradicts something?
	
	Otherwise suppose $\Gamma'_{r_1} \subsetneq \Gamma'_{r_2}$.
	As $\Gamma'_{r_1}$ is full-dimensional, so is $\Gamma'_{r_1} \cap \Gamma'_{r_2} = \Gamma'_{r_1}$.
	Again, since we know that $|\Gamma'(p)| = 1$ almost everywhere, and as the intersection of the two level sets is full-dimensional, this again contradicts the differentiability of $G$ almost everywhere, since the intersection of the level sets has positive measure in the simplex.
	Therefore, $\Gamma'$ is nonredundant.

\end{proof}


\begin{lemma}\label{lem:define-trim}
	Let $\Gamma$  be a nondegenerate, elicitable property \jessie{with a finite set of level sets $\Theta$ so that $\cup_{\theta \in \Theta} \theta = \P$?}.
	There exists an unlabeled property $\Theta$ so that for all nondegenerate, nonredundant $\Gamma' \leq \Gamma$, we have $\strip(\Gamma') = \Theta := \text{trim}(\Gamma)$.
\end{lemma}

\begin{proof}
	We just want to show $\trim(\Gamma)$ is unique because of Conjecture~\ref{conj:gam-prime-exists}.
	
	Consider two nonredundant, nondegenerate properties $\Gamma' = \Gamma \cap \R' \leq \Gamma$ and $\tilde \Gamma  = \Gamma \cap \tilde \R \leq \Gamma$.
	It is sufficient to show $\Theta' := \strip(\Gamma') = \strip(\tilde \Gamma) =: \tilde \Theta$.
	
	First, fix a level set $\theta \in \Theta'$.
	There is some report $r'$ so that $r' \in \Gamma(p) \cap \R'$ for all $p \in \theta$ by nondegeneracy of $\Gamma'$.
	Now, for contradiction, suppose $\Gamma'_{r'} \not\in \strip(\tilde \Gamma)$.
	Therefore, there is \emph{not} a report $r \in \tilde \R$ so that $\Gamma'_{r'} = \tilde \Gamma_r$.
%	Now, if $\tilde \Gamma(p) = \emptyset$ for some $p \in \theta$, then we contradict nondegeneracy of $\tilde \Gamma$.
	
	As $\Gamma' \leq \Gamma$ and $\tilde \Gamma \leq \Gamma$, then for some $r \in \tilde \R$, we then see that either $\Gamma'_{r'} \subsetneq \tilde \Gamma_r$ or $\tilde \Gamma_r \subsetneq \Gamma'_{r'}$.
	Intuitively, we see this because both $\Gamma'$ and $\tilde{\Gamma}$ are restrictions of the property $\Gamma$, so every level set of a restricted property must be a superset of or equal to a level set of $\Gamma$.
%	(If the level sets are not equivalent, then the intersection $\Gamma'_{r'} \cap \tilde{\Gamma_r}$ must be lower dimensional by nonredundancy of $\Gamma'$ and $\tilde{\Gamma}$ since $\partial G$ is real-valued amost everywhere.)
	The first case contradicts nonredundancy of $\Gamma'$ and the latter contradicts nonredundancy of $\tilde \Gamma$.
	Thus, there must be some $r \in \tilde{\R}$ so that $\Gamma'_{r'} = \tilde{\Gamma_r}$, so we conclude $\Gamma'_r \in \strip(\tilde \Gamma)$.
	
	The other direction of inclusion follows from the same logic.
	Therefore, for all nonredundant, non-degenerate properties $\Gamma' \leq \Gamma$, we observe the unique unlabeled property $\trim(\Gamma) := \Theta = \strip(\Gamma')$.
	
\end{proof}




\begin{conjecture}\label{conj:trim-full-dim}
	Consider a nondegenerate, elicitable property $\Gamma$ with finitely many level sets.
	Every $\theta \in \Theta := \trim(\Gamma)$ is full-dimensional  
\end{conjecture}

\begin{proof}[Proof Sketch]
	\emph{Uses: Conjecture~\ref{conj:gam-prime-exists}.}
	
	In order to understand what $\trim(\Gamma)$ is, we use the property $\Gamma' \leq \Gamma$ constructed in Conjecture~\ref{conj:gam-prime-exists}, and suppose $\R'$ is the set such that $\Gamma' = \Gamma\cap \R'$.
	For each $\theta \in \trim(\Gamma) = \strip(\Gamma)$, there must be a report $r \in \R'$ such that $\theta = \Gamma'_r$.
	By construction, $r \in \R' \implies \inter{\Gamma'_r} = \inter{\theta} \neq \emptyset$.
	Since $\theta$ is convex (as level sets of elicitable properties are) and has nonempty interior, then \jessie{$\theta$ has positive Lebesgue measure $\implies \theta$ is affinely independent $\implies$} $\theta$ is full dimensional. 
	
	Therefore, every level set $\theta \in \trim(\Gamma)$ is full-dimensional.
	
%	First, we see $\Theta := \trim(\Gamma) = \strip(\Gamma')$ is nonredundant in the unlabeled definition (Definition~\ref{def:unlabeled-nonredundant}) as $\Gamma'$ is nonredundant in the labeled set from Lemma~\ref{lem:nonredundant-defs-equivalent}, since we know $\Gamma'$ is well-defined and nonredundant from Conjecture~\ref{conj:gam-prime-exists}.
%	
%	
%	
%	For contradiction:
%	Let $\theta \in \Theta$ not full-dim and non-redundant (whatever that means for an unlabeled property-- see definition \ref{def:unlabeled-nonredundant} section for proposed definition).
%	
%	We now show that every level set $\theta \in \Theta = \strip(\Gamma') = \trim(\Gamma)$ is full dimensional.
%	
%	We proceed in 2 cases for a level set $\theta \in \Theta$:
%	\begin{enumerate}
%		\item For all $\theta' \in \Theta$, $\theta \cap \theta' = \emptyset$.
%		\jessie{Doesn't this only happen when $\{\theta\} = \Theta$?}
%		
%		We know the level set $\theta$ is closed by Lemma~\ref{lem:closed-level-sets}.
%		By definition of $\R'$, for $p \in \inter{\theta}$ so that for $r_\theta = \Gamma'(p)$, there is a ball $B(\epsilon, p)$ centered around $p$ so that for every $q \in B(\epsilon, p)$, $r_\theta \in \Gamma'(q)$.
%%		(In fact, as $\Theta$ is nonredundant, we claim $r_\theta = \Gamma'(q)$. \jessie{Need to show?})
%		Therefore, the level set $\Gamma_{r_\theta} = \theta$ is full dimensional as it has nonempty interior.
%		
%		Intuitively, this can be seen since the interior of $\theta$ is nonempty by nondegeneracy of $\Gamma'$.
%		
%		\bigskip
%		\hrule
%		Other notes from meeting with Raf 9/24/18:\\
%		Use closure and nondegeneracy
%		
%		Look at subset topology? ($\tau_{\R'} := \{\R' \cap U : U \in \tau \}$.)
%		
%		\hrule
%		\item There exists a level set $\theta' \in \Theta$, $\theta \cap \theta' \neq \emptyset$.
%		
%		By nonredundancy of $\Gamma'$, we then observe nonredundancy of $\Theta$, we know that $\mu(\theta \cap \theta') = 0$.
%		We want to show that $\theta$ is full dimensional.
%		
%		For contradiction, suppose $\theta \in \trim(\Gamma)$ is not full dimensional.
%		By Conjecture~\ref{conj:gam-prime-exists}, there exists a nonredundant, nondegenerate $\Gamma' \leq \Gamma$ so that $\trim(\Gamma) = \strip(\Gamma')$.
%		Consider $\R'$ so that $\Gamma' = \Gamma \cap \R'$ as constructed in the proof of Conjecture~\ref{conj:gam-prime-exists}.
%		
%		Suppose $\theta \in \trim(\Gamma)$ is not full dimensional.
%		Then $\inter{\theta} = \emptyset$.
%		As $\trim(\Gamma) = \strip(\Gamma')$, we observe that there is a unique $r \in \R'$ so that $\Gamma'_r = \theta$.
%		However, $\inter{\theta} = \inter{\Gamma'_r} = \emptyset \implies r \not \in \R'$ by the construction of $\R'$.
%		Since $\trim(\Gamma) = \strip(\Gamma')$ \emph{for all} nonredundant, nondegenerate $\Gamma' \leq \Gamma$-- including the $\Gamma'$ constructed in the proof of Conjecture~\ref{conj:gam-prime-exists}, then we conclude $\Gamma_r = \theta \not \in \strip(\Gamma') = \trim(\Gamma)$.
%		
%		
%		\bigskip
%		\hrule
%		Other notes from meeting:\\
%		Look at expected loss/score of $\Gamma'$.
%		\hrule
%	\end{enumerate}
	
%	Therefore, we have a contradiction and conclude $\theta \in \trim(\Gamma)$ is full dimensional. 
\end{proof}



%\begin{lemma}\label{lem:intersect-lev-sets}
%  Let the elicitable property $\Gamma$ have a finite set $\Theta$ of full-dimensional level sets, so that for all $\theta \in \Theta$,  there is a unique optimal report $r_\theta$ for all $p \in \inter{\theta}$.
%  Consider the finite set $\R' := \{ r_\theta\}_{\theta \in \Theta}$.
%  Then for every $r \in \R$, there exists a finite set $R \subseteq \R'$ so that $\Gamma_r = \bigcap_{r' \in R} \Gamma_{r'}$.
%\end{lemma}
%%\jessie{To show: can find set $R$ s.t. $\Gamma_r = \bigcap_{r' \in R} \Gamma_{r'}$, and $R$ is finite.}
%\begin{proof}
%  \emph{Facts used: Level sets are closed (Lemma \ref{lem:closed-level-sets}), non-degeneracy of $\Gamma$.}\\
%
%  Note:    As $\Gamma$ is non-degenerate, we know for all $p \in \P$ that $|\Gamma(p)| \geq 1$.
%  For any $p \in \P$, if $|\Gamma(p)| = 1$, then $\Gamma(p) = r \in \R'$, so we can choose $S := \{r\} \subseteq \R'$ so that $\Gamma_r = \cap_{r \in S} \Gamma_r$.
%  
%  In general, if $\Gamma(p)$ is set-valued, there is some collection $S \subseteq \R$ so that $p \in \bigcap_{r \in S} \Gamma_r$.
%  We want to find set a \emph{finite} set $S \subseteq \R'$ so that the previous statement is true.
%  ($S$ is not necessarily finite, but we want to show there is a finite $S$ so that's true.)
%
%Construct the finite set $S_r := \{ r_i \in \R' : \forall q \in \Gamma_{r}, \exists p \in \Gamma_{r_i} \text{ s.t. } p \in B(\epsilon, q) \}$.
%In words, $S_r$ is the set of reports that are uniquely optimal for some distribution in the $\epsilon$ ball around any $p \in \Gamma_r$.
%$S_r \subseteq \R'$ by construction, so $S_r$ is finite. 
%We then just want to show the equivalence of $\Gamma_r$ and $\cap_{r' \in S_r}\Gamma_{r'}$.
%
%($\subseteq$)  We want to show $\Gamma_r \subseteq \cap_{r' \in S_r}\Gamma_{r'}$
%Let $q \in \Gamma_r$.
%If $q \in \Gamma_r$, then for every $r_i \in S_r$, there is some $p \in \inter{\Gamma_{r_i}}$ so that $p \in B(\epsilon, q)$.
%Since $q$ is $\epsilon$-close to $p$, then we observe $q \in cl(\Gamma_{r_i})$.
%\jessie{A bit hand-wavvy}
%
%As level sets are closed (by Lemma \ref{lem:closed-level-sets}), $\Gamma_{r_i} = cl(\Gamma_{r_i})$, so $q \in \Gamma_{r_i}$.
%%Thus as $q \in \Gamma_r \implies q \in \Gamma_{r_i}$ for all $r_i \in S_r$, $q \in \Gamma_r \implies q \in \cap_{r_i \in S} \Gamma_{r_i}$.
%Thus as $q \in \Gamma_r \implies q \in \Gamma_{r_i}$ for all $r_i \in S_r$, we observe $\Gamma_r \subseteq \cap_{r_i \in S}\Gamma_{r_i}$.
%
%\bigskip 
%($\supseteq$)  Now suppose the distribution $t \in \cap_{r_i \in S_r}\Gamma_{r_i}$.
%We want to show $t \in \Gamma_r$.
%
%As $t \in \cap_{r_i \in S_r}\Gamma_{r_i}$, we know for every $r_i \in S_r$ that $t \in \Gamma_{r_i}$.
%
%Since each $r_i \in S_r$, that means that for every $q \in \Gamma_r$, there is a distribution $p \in \Gamma_{r_i}$ that is in the $\epsilon$-ball $B$ around $q$.
%As this is true for every $r_i \in S_r$, the distribution $t \in B(\epsilon, q)$ for some $q \in \Gamma_r$. 
%Therefore, as level sets are closed, $t \in B(\epsilon, q) \implies t \in cl(\Gamma_r) \implies t \in \Gamma_r$.
%Thus, $\cap_{r_i \in S_r}\Gamma_{r_i} \subseteq \Gamma_r$.
%
%Therefore, by constructing the finite set $S_r$, we observe there is a finite set $S_r := R \subseteq \R' \subseteq \R$ such that for every $r \in \R$, we observe $\Gamma_r = \cap_{r_i \in R}\Gamma_{r_i}$.
%
%\end{proof}




\section{Main statement}


\begin{proposition}\label{prop:optimal-reports-per-level-set}
  Let $\Gamma:\P\toto\reals^d$ be a non-degenerate elicitable property.

  The following are equivalent:
  \begin{enumerate}
  \item There is a finite set $\Theta \subseteq \strip(\Gamma)$ of full-dimensonal level sets, such that: (a) $\bigcup_{\theta\in\Theta} \theta = \P$, (b) for all $\theta \in \Theta$, there exists an $r_\theta \in \R$ such that $\Gamma(p) = \{r_\theta\}$ for all $p \in \inter{\theta}$.
  \item $\trim(\Gamma)$ is finite.
  \item $\strip(\Gamma)$ is finite.
  \end{enumerate}
\end{proposition}

\begin{proof}
First, we show $2 \iff 3$ then proceed in different directions to show $1\implies 2$ and $3 \implies 1$, or something like that.

\begin{enumerate}
	\item [$3 \implies 2$]
	$\trim(\Gamma) \subseteq \strip(\Gamma)$, and if $\strip(\Gamma)$ is finite, then any subset of $\strip(\Gamma)$ is finite.
	
	\item[$2 \implies 3$] 
	Consider $\trim(\Gamma)$ to be finite.
%	If $\Gamma$ is nonredundant, then we are finished, as $\Gamma \leq \Gamma$ and would be nondegenerate and nonredundant, so we can say $\trim(\Gamma) = \strip(\Gamma)$.
	
	We know there is a nonredundant, nondegenerate $\Gamma' \leq \Gamma$ so that $\strip(\Gamma') = \trim(\Gamma)$ by Conjecture~\ref{conj:gam-prime-exists} and the definition of trim.
	We take $\Gamma'$ as constructed in Conjecture~\ref{conj:gam-prime-exists} and let $\R'$ be the set constructed in the proof of Conjecture~\ref{conj:gam-prime-exists}.
	We then want to show $\strip(\Gamma) = \strip(\Gamma') \bigcup S$, where $S$ is some finite set.
	Consider the level set $\Gamma_r$ for $r \in \R$.
	If $r \in \R'$, then $\Gamma_r \in \strip(\Gamma')$.
	If $r \not \in \R'$, then the level set $\Gamma_r$ has empty interior by construction of $\R'$.
	%\jessie{Need argument about how we can only have level sets on the boundary.}
	Since $\Gamma$ is elicitable, the Score $G(p)$ is concave.
	As $G$ is differentiable almost everywhere, every level set with nonempty interior has $|\partial G(p)| = 1$ for all $p \in \inter{\theta}$, and there is then a report $r \in \R'$ so that $\theta \in \Gamma_r$.
	Thus, we concern ourselves with the case $|\partial G(p)| > 1$.
	%If $|\partial_p G(p)| = 1$ for some $p \in\theta$, then the interior $\inter{\theta} \neq \emptyset$, implying $r \in \R'$ by closure of level sets, so we must concern ourselves with the case $|\partial_p G(p)| > 1$.
	As subgradient sets are closed, there exists a finite full dimensional set $\{\theta_i\}_{i=1}^n$ in the $\epsilon$-ball around each $p \in \theta$ so that for any $p_i \in \inter{\theta_i}$, we observe $\partial G(p_i) \neq \partial_p G(p_j)$ for all $i \neq j$ and $\partial G(p_i) = \{r_i\}$ for all $1 \leq i \leq n$.
	Additionally, as level sets are closed, we claim $p \in \Gamma{r_i}$ for all $1 \leq i \leq n$.
	Therefore, $p \in \theta \implies p \in \bigcap_{\{r_i\}_{i=1}^n} \Gamma_{r_i}$ for some $\{r_i\}_{i=1}^n \subseteq \R'$.
	As $\R'$ is finite, so is the power set $2^{\R'}$, so the set $S$ is finite.
	Therefore $\strip(\Gamma) = \strip(\Gamma') \cup S$ is finite. 
	
\item [$1 \implies 2$]
Suppose that we define $\trim(\Gamma) = \strip(\Gamma')$ for the nonredundant, nondegenerate property $\Gamma \cap \R' = \Gamma' \leq \Gamma$ as constructed in Conjecture~\ref{conj:gam-prime-exists}.

Consider $\strip(\Gamma') = \{\Gamma_r : r \in \R'\}$, so it is sufficient to show $\R'$ is finite.
Since $\Theta$ is the set of full-dimensional level sets, and $\R'$ is defined as the set of reports corresponding to level sets with nonempty interior (i.e. full-dimensional), then $\R' = \{r_\theta\}_{\theta \in \Theta}$ is finite as $\Theta$ is finite.
(Note that $r_\theta$ is unique for each level set because of nonredundancy of $\Gamma'$.)

Therefore, $\trim(\Gamma)$ is finite.

\item [$2 \implies 1$]
Consider $\trim(\Gamma) = \Theta$.
$\Theta$ is then finite and a subset of strip by definition, and by Conjecture~\ref{conj:trim-full-dim}, every $\theta \in \Theta$ is full dimensional.
Consider that $\trim(\Gamma) = \strip(\Gamma')$, and as $\Gamma'$ is nondegenerate, then for every $p \in \P$, there is a $\theta \in \Theta$ so that $p \in \theta$, so the union of the level sets is then equal to the distribution set $\P$.
Additionally, as $\Gamma$ is elicitable, the optimal report is unique almost everywhere by concavity of the score $G$.
Therefore, if $p \in \inter{\theta}$ and the optimal report $r_\theta$ is unique almost everywhere, then as there is an $\epsilon$-ball around $p$ where every for every $p'$ in the ball, $p' \in B(\epsilon, p)$, $\Gamma(p) = \Gamma(p')$.
%Additionally, for every $\theta \in \strip(\Gamma')$, there is an $r \in \R'$ so that $\{r\} = \Gamma(p)$ for all $p \in \inter{\theta}$ by nonredundancy of $\Gamma'$ and .

%We can rewrite $\strip(\Gamma) = \{\Gamma_{r'} : r' \in \R' \} \cup \{\Gamma_{r} : r \in \R \setminus \R' \}$.
%As the first set is finite, we just need to show $\{\Gamma_{r} : r \in \R \setminus \R' \}$ is finite in order to show $\strip(\Gamma)$ is finite.
%
%Let us consider some $r\in\R \setminus \R'$.
%The level set $\Gamma_r = \{p : \Gamma(p) = r\}$ by definition.
%As $r \not\in \R'$, the interior is empty; that is, $\inter{\Gamma_r} = \emptyset$.
%% For any $p \in \Gamma_r$, then, there is some $q \in B(\epsilon, p)$ such that $\E_q L(r', Y) < \E_q L(r,y)$ for some $r' \in \R'$.
%% As $r = \argmin_{\tilde{r}} \E_p L(\tilde{r}, Y)$, then we observe $\E_p L(r, Y) = \E_p L(r', Y) = \min_{\tilde{r}}\E_p L(\tilde{r}, Y)$ for $p \in \Gamma_r$. 
%% Thus, $\Gamma_r \subseteq \Gamma_{r'}$.
%By Conjecture \ref{lem:intersect-lev-sets}, there exist a set of finite reports $R \subseteq \R'$ such that $\bigcap_{r'\in R} \Gamma_{r'} = \Gamma_r$.
%As the set $\R'$ is finite, then the power set $2^{\R'}$ is finite.
%Thus, the set $\{ \Gamma_r : r \in \R \setminus \R' \} =  \{ \bigcap_{r_1 \in R} \Gamma_{r_1} : R \subseteq \R' \}$ is finite.
%
%
%The union of a two finite sets is then finite, so $\trim(\Gamma) \subseteq \strip(\Gamma) = \{ \Gamma_{r'} : r' \in \R' \} \cup \{ \Gamma_r : r \in \R \setminus \R' \}$ is finite.



%\item[$2 \implies 1$]  
%\emph{Assumptions used: Nondegeneracy, elicitability of $\Gamma$}
%
%Let $\Theta := \trim(\Gamma)$ be a finite set.
%By Conjecture~\ref{conj:gam-prime-exists}, there is then a nonredundant, nondegenerate property $\Gamma'$ such that $\strip(\Gamma') = \trim(\Gamma)$.
%Let $\R' \subseteq \R$ be the finite set used to define the property $\Gamma'$.
%
%As $\Theta$ is finite and $\trim(\Gamma)$ is the set of full dimensional level sets of $\Gamma$, the finite number of full-dimensional level sets follows from the assumption and definitions combined.
%
%Consider a level set $\theta\in \Theta$.
%There is a report $r \in \R'$ so that $\Gamma'(p) = \{r\}$ for all $p \in \inter{\theta}$; this follows from nonredundancy of $\Gamma'$.
%
%Therefore if the function $\trim(\Gamma)$ is well-defined and finite, then the labeled property $\Gamma$ has a finite set of full-dimensional level sets and for every $\theta \in \Theta$, there is a unique optimal report for every distribution $p \in \inter{\theta}$.
%\jessie{Uniqueness actually follows from concavity of Bayes Risk, since the measure of the sets with multiple viable labels has to be of measure zero, and can't be full dimensional.}
%
%
%%Let $\Theta := \trim(\Gamma)$ be a finite set.
%%By construction, $\Theta$ is a set of full dimensional level sets defining the property $\Gamma$.
%%Thus, $\Gamma$ then only has finitely many \emph{full-dimensional} level sets.
%%Then there is a finite set $\R' \subseteq \R$ defined by the property $\Gamma' \leq \Gamma$ where $\strip(\Gamma') = \trim(\Gamma)$.\jessie{Make sure I can claim this.}
%%
%%Consider a level set $\theta \in \Theta$.
%%We want to show there is a unique $r \in \R'$ such that $\Gamma(p) = \{r\}$ for all $p \in \inter{\theta}$.
%%
%%Take the finite set $\R' \subseteq \R$ such that the nondegenerate, nonredundant property $\Gamma' \leq \Gamma$.
%%Fix some level set $\theta \in \Theta$.
%%For any $p \in \inter{\theta}$, there is then a report $r \in \R'$ such that  $r \in \Gamma(p)$ by nondegeneracy of $\Gamma'$.
%%We then want to show $r$ is unique.
%%
%%For contradiction, consider some $r' \in \R'$ such that $r \neq r'$.
%%As $\trim(\Gamma) = \strip(\Gamma')$ contains only full dimensional level sets, then $\Gamma_r$ and $\Gamma_{r'}$ are both full dimensional, as is their intersection $\Gamma_r \cap \Gamma_{r'}$.
%%Since we define $\Gamma'$ in a manner so that for all $r \in \R' \implies \Gamma_r = \Gamma'_r$, we then say $\Gamma_r \cap \Gamma_{r'} = \Gamma'_r \cap \Gamma'_{r'}$, which contradicts the nonredundancy of $\Gamma'$.
%%Therefore we observe a contradiction, and conclude $r = r'$.
%%Therefore, if $\trim(\Gamma)$ is finite, then the property $\Gamma$ has a finite set (namely, $\trim(\Gamma)$) of full dimensional level sets so that for every $\theta \in \Theta$, there is a unique optimal report $r$ for every $p \in \inter{\theta}$.


\end{enumerate} 

\end{proof}

%\section{To Do after meeting 9.24.18}
%
%
%\begin{enumerate}
%\item[a.] look at Rockefellar- algebraic interior
%
%\item[b.] Appendix of complexity paper- the Bayes Risk must be strictly concave.
%\end{enumerate}



\section{Lemmas that probably aren't necessary to show in a paper, but for the sake of convincing myself}

\begin{lemma}\label{lem:closed-level-sets}
	Let $\Gamma$ be elicitable.
	For any $r\in\R$, the level set $\Gamma_r = \{ p \in \Delta(\Y) : \Gamma(p) = r \}$ is closed.
\end{lemma}
\begin{proof}[Proof sketch]
	Let $L$ elicit $\Gamma$.
	The function $G(p) = -\min_{r\in\R} \E_p L(r,Y) = -\E_p L(\Gamma(p),Y)$ (taking any $r\in\Gamma(p)$ in case of ties) is convex.
	There exists $\D \subseteq \partial G$ and some bijection $\varphi : \R \to \D$ with $\Gamma(p) = \varphi^{-1}(\D\cap \partial G_p)$.
	Thus, $\Gamma_r = \{p : r\in\Gamma(p)\} = \{p : \varphi(r) \in \D\cap\partial G_p\} = \{p : \varphi(r) \in \partial G_p\}$, which is closed by convex analysis.
	See [Raf/Ian\footnote{\url{https://arxiv.org/pdf/1211.3043.pdf}} (Cor 3.11), with their Thm 3.5 and Rockefellar Thm 24.4]  
\end{proof}

\begin{lemma}\label{lem:nonredundant-defs-equivalent}
	An elicitable property $\Gamma$ with finite level sets is nonredundant (in the labeled definition) $\iff$ $\strip(\Gamma)$ is nonredundant (in the unlabeled definition.)
\end{lemma}
\begin{proof}
	We show both directions.\\
	\begin{enumerate}
		\item [$\implies$]
		Let the property $\Gamma:\P \to \R$ be nonredundant.
		Then for any two reports $r, r' \in \R$ with $r \neq r'$, the level sets $\theta := \Gamma_r \not \subseteq \Gamma_{r'}$ and $\theta' := \Gamma_{r'} \not \subseteq \Gamma_r$.
		In what follows, $G : \P \to \R$ is the Bayes Risk, or optimal report given a distribution $p$.
		Each report $r$ corresponds to a labeling of the subgradient sets of $G$.
		
		\jessie{Doesn't really use the assumption at all... uses concavity of Bayes Risk.}
		
		For notation, we write the set $S := \{p \in \P : |\partial(G(p))| > 1\}$
		
		Then consider the set $\theta \cap \theta'$.
		
		
		%		Suppose for contradiction that $\inter{(\theta \cap \theta')} \neq \emptyset$.
		%		Then there is some $s \in \inter{(\theta \cap \theta')}$ so that $p \in B(\epsilon, s) \implies p \in \inter{(\theta \cap \theta')}$.
		%		As the ball $B(\epsilon s)$ is convex with nonempty interior, it has positive measure, and by monotonicity of a measure, we say $0 < \mu(B(\epsilon, s)) \leq \mu(\inter{(\theta \cap \theta')})$.
		
		Since the property $\Gamma$ is elicitable, the Bayes Risk is strictly convex-- meaning it is differentiable almost everywhere, thus $\mu(S) = 0$.
		
		Since we assume $r \neq r'$, we observe that $(\theta\cap\theta') \subseteq S$.
		By monotonicity of $\Gamma$, since $(\theta\cap\theta') \subseteq S$, we know $\mu(\theta \cap \theta') \leq \mu(S) = 0$.
		
		%		This, however, contradicts the positive measure of the interior.
		%		Therefore, it must be the case that the interior has Lebesgue measure $0$.
		
		Since $0 \leq \mu(\theta \cap \theta') \leq \mu(S) = 0$, we observe the unlabeled definition of nonredundancy.
		
		
		\item[$\impliedby$] 
		Say that for any two full dimensional level sets $\theta, \theta' \in \Theta := \strip(\Gamma)$ that $\mu(\theta \cap \theta') = 0$.
		Then there are reports $r, r' \in \R$ such that $\theta = \Gamma_r$ and $\theta' = \Gamma_{r'}$.
		Since the property $\Gamma$ is elicitable, the level sets $\Gamma_r$ and $\Gamma_{r'}$ are convex.
		$\mu(\Gamma_r \cap \Gamma_{r'}) = 0 \implies$ the interior of $\Gamma_r \cap \Gamma_{r'}$ is empty by Lemma~\ref{lem:pos-measure-iff-nonempty-int}.
		Therefore, the intersection of the two level sets is not full dimensional.
		
		As $\theta, \theta'$ are both full dimensional, than their intersection not being full dimensional implies they only share optimal reports on the boundary. \jessie{To cite?}
		
		Therefore, we can see that $\theta \not \subseteq \theta'$ as $\theta \neq \theta' \cap \theta$, nor are they equal as their intersection is lower dimensional.
		
		Therefore, $\strip(\Gamma)$ is nonredundant $\implies \Gamma$ is nonredundant.
	\end{enumerate}
	
\end{proof}

\begin{lemma}\label{lem:pos-measure-iff-nonempty-int}
	Let $S$ be a convex set.
	$S$ has nonempty interior $\iff S$ has positive Lebesgue measure.
\end{lemma}
\begin{proof}
	
	\begin{enumerate}
		\item[$\implies$]
		Let $S$ have nonempty interior.
		We know that as $\inter{S}$ and $bd(S)$ are disjoint, $\mu(S) = \mu(\inter{S}) + \mu(bd(S))$.
		Since the interior of $S$ is nonempty, there is an open ball $B \subseteq S$ such that $x \in B \implies x \in \inter S$.
		As Lebesgue measure in $\reals^n$ is a product measure and every open interval has positive measure, then the Lebesgue measure of the ball $B$ is the product of finitely many positive measures, and therefore positive.
		As $0 < \mu(B) \leq \mu(\inter S) \leq \mu(S)$ by monotonicity, we see that $S$ with nonempty interior has positive measure.
		
		\item[$\impliedby$]  Follows from the contrapositive and definition of measure.
		That is, $\mu(S) = \mu(\inter{S}) + \mu(bd(S)) = \mu(\inter{S})$.\footnote{Since $S$ is convex, $\mu(bd(S)) = 0$ according to \url{https://math.stackexchange.com/questions/613408/when-does-the-boundary-have-measure-zero}.}
		As $\inter{S} = \emptyset \implies \mu(\inter{S}) = 0$, and hence does not have positive measure.
	\end{enumerate}
\end{proof}

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

